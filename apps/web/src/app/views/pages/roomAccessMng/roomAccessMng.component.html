<div class="form-group">
  <div class="form-row">
    部屋
    <div class="col-auto">
      <select class="form-control" [(ngModel)]="searchList">
        <option value=""></option>
        <option *ngFor="let data of enums.Rooms" value={{data.id}}>
          {{data.id}}:{{ data.name | translate }}
        </option>
      </select>
    </div>
    <div class="col-auto">
      <button class="btn btn-primary" (click)="openSearchDialog()">{{ 'Search' | translate }}</button>
    </div>
  </div>
  <hr>
  
  <button class="btn btn-primary" (click)="regRoomAccessMng(null)" *ngIf="user.authCheck(21)">{{ 'Add' | translate }}</button>
  <hr>

  <div class="table-responsive">
  <table class="table table-bordered">
    <thead class="thead-light">
      <tr>
        <th>{{ 'ID' | translate }}</th>
        <th>{{ 'Room' | translate }}</th>
        <th>{{ 'User' | translate }}</th>
        <th>{{ 'EntryDateTime' | translate }}</th>
        <th>{{ 'ExitDateTime' | translate }}</th>
        <th>{{ 'Note' | translate }}</th>
        <th *ngIf="user.authCheck(22)"></th>
        <th *ngIf="user.authCheck(23)"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of roomAccessMngs">
        <td>{{ data.id }}</td>
        <td>{{ data.room_cd | enumChange: enums.Rooms }}</td>
        <td>{{ data.user_id | enumChange: userList }}</td>
        <td>{{ data.entry_dt | date:"yyyy/MM/dd HH:mm" }}</td>
        <td>{{ data.exit_dt | date:"yyyy/MM/dd HH:mm" }}</td>
        <td>{{ data.note }}</td>
        <td *ngIf="user.authCheck(22)"><mat-icon color="primary"(click)="regRoomAccessMng(data)">edit</mat-icon></td>
        <td *ngIf="user.authCheck(23)"><mat-icon color="warn" (click)="delRoomAccessMng(data)">delete_forever</mat-icon></td>
      </tr>
    </tbody>
  </table>
  </div>
</div>

<div class="table-container">
  <mat-table mat-table [dataSource]="dataSource" matSort #GridSort="matSort">

    <div *ngFor="let list of columnDefine; let i = index">
      <ng-container [matColumnDef]="list.column" [ngSwitch]="list.type">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ list.name | translate }}
        </th>
        <!-- 文字列 -->
        <ng-container *ngSwitchCase="'string'">
          <td mat-cell *matCellDef="let data">
            {{ data[list.column] }}
          </td>
        </ng-container>
        <!-- 数値 -->
        <ng-container *ngSwitchCase="'number'">
          <td mat-cell *matCellDef="let data" style="text-align: right;">
            {{ data[list.column] | number : list.format }}
          </td>
        </ng-container>
        <!-- 日時 -->
        <ng-container *ngSwitchCase="'datetime'">
          <td mat-cell *matCellDef="let data">
            {{ data[list.column] | date: list.format }}
          </td>
        </ng-container>
        <!-- enum -->
        <ng-container *ngSwitchCase="'enum'">
          <td mat-cell *matCellDef="let data">
            {{ data[list.column] | enumChange : list.enum }}
          </td>
        </ng-container>
        <!-- ボタン -->
        <ng-container *ngSwitchCase="'button'">
          <td mat-cell *matCellDef="let data" style="text-align: center;">
            <mat-icon [color]="list.color" (click)="list.method(data)" *ngIf="user.authCheck(list.auth)">{{ list.icon }}</mat-icon>
          </td>
        </ng-container>
      </ng-container>
    </div>

    <tr mat-header-row *matHeaderRowDef="dispCol; sticky: true"></tr>
    <tr mat-row *matRowDef="let data; columns: dispCol"></tr>
  </mat-table>
</div>